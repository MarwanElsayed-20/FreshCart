"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[712],{8712:function(e,a,s){s.r(a),s.d(a,{default:function(){return f}});var r=s(4165),t=s(5861),n=s(9439),o=s(2791),l=s(4916),i=s(7689),d=s(1087),c=s(635),u=s(4270),m=s(5705),h=s(6727),p=s(1243),g=s(2),w=s(6307),x=s(184);function f(){var e=(0,o.useState)(!1),a=(0,n.Z)(e,2),s=a[0],f=a[1],j=(0,o.useState)(""),v=(0,n.Z)(j,2),b=v[0],N=v[1],y=(0,o.useContext)(g.M),S=y.login,Z=y.setLogin,C=y.setUserName,k=(0,i.s0)(),L=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(a){var s,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,p.Z.post("".concat("https://ecommerce.routemisr.com","/api/v1/auth/signin"),a).catch((function(e){N(e.response.data.message),f(!1)}));case 3:s=e.sent,"success"===(t=s.data).message&&(window.location.reload(),N(""),localStorage.setItem("userToken",t.token),localStorage.setItem("userName",t.user.name),Z(t.token),C(t.user.name),k("/"),f(!1));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=h.Ry({email:h.Z_().required("Email is required").email("Email is not valid"),password:h.Z_().required("Password is required")}),B=(0,m.TA)({initialValues:{email:"",password:""},validationSchema:q,onSubmit:L});return(0,o.useEffect)((function(){}),[S]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(u.q,{children:[(0,x.jsx)("meta",{charSet:"utf-8"}),(0,x.jsx)("title",{children:"Login"})]}),(0,x.jsx)(l.Z,{text:"My Account",path:"Login"}),(0,x.jsxs)("div",{className:"w-75 m-auto shadow text-center my-5 p-5",children:[(0,x.jsx)("h3",{children:"Login"}),(0,x.jsx)("p",{className:"text-muted",children:"Please login using account details bellow."}),(0,x.jsxs)("form",{onSubmit:B.handleSubmit,action:"",className:"d-flex justify-content-center align-items-center flex-column",children:[b?(0,x.jsxs)("p",{className:"alert alert-danger rounded-0 w-100",children:[b,"."]}):"",(0,x.jsx)("input",{type:"email",className:"form-control mb-3 rounded-0",placeholder:"Email address",name:"email",id:"email",onChange:B.handleChange,value:B.values.email,onBlur:B.handleBlur}),B.errors.email&&B.touched.email?(0,x.jsx)("p",{className:"alert alert-danger mt-0 rounded-0 w-100",children:B.errors.email}):"",(0,x.jsx)("input",{type:"password",className:"form-control mb-3 rounded-0",placeholder:"Password",name:"password",id:"password",onChange:B.handleChange,value:B.values.password,onBlur:B.handleBlur}),B.errors.password&&B.touched.password?(0,x.jsx)("p",{className:"alert alert-danger mt-0 rounded-0 w-100",children:B.errors.password}):"",(0,x.jsx)(d.rU,{to:"/forgotPassword",className:"mb-3 text-muted login",children:"Forgot your password?"}),(0,x.jsx)(c.Z,{text:s?(0,x.jsx)(w.g4,{height:"30",width:"80",radius:"9",color:"#212529bf",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0}):"Login",width:"w-100",type:"submit"}),(0,x.jsx)(d.rU,{to:"/register",className:"mt-3 text-muted login",children:"Don't have an account? Create account."})]})]})]})}}}]);
//# sourceMappingURL=712.20bd1978.chunk.js.map