"use strict";(self.webpackChunksession=self.webpackChunksession||[]).push([[673],{5673:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var a=s(4165),r=s(5861),n=s(2791),l=s(4270),o=s(4916),i=s(5705),c=s(6727),d=s(635),u=s(6307),m=s(9627),h=s(9439),p=s(7870),x=s(1243),w=s(6747),f=s(7689),b=s(184);function j(){var e=(0,n.useState)(""),t=(0,h.Z)(e,2),s=t[0],l=t[1],o=(0,n.useState)(""),c=(0,h.Z)(o,2),j=c[0],g=c[1],v=(0,n.useState)(!1),y=(0,h.Z)(v,2),C=y[0],N=y[1],S=(0,n.useContext)(m.D),Z=S.open,k=S.handleClose,P=S.setOpen,F=(0,f.s0)(),B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,x.Z.post("".concat("https://ecommerce.routemisr.com","/api/v1/auth/verifyResetCode"),t).catch((function(e){l(e.response.data.message),N(!1),console.log(r)}));case 3:s=e.sent,"Success"===(r=s.data).status&&(l(""),g(r.status),setTimeout((function(){P(!1),F("/CreateNewPassword")}),2e3),N(!1),console.log(r)),console.log(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=(0,i.TA)({initialValues:{resetCode:""},onSubmit:B});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(p.Z,{open:Z,onClose:k,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,b.jsx)(w.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"none",boxShadow:24},children:(0,b.jsxs)("div",{className:"w-100 p-5 m-0 shadow text-center bg-white",children:[(0,b.jsx)("p",{className:"text-muted m-0",children:"Please enter the reset code."}),(0,b.jsx)("p",{className:"text-muted",children:"The reset code will expire in 10 minutes"}),(0,b.jsxs)("form",{onSubmit:T.handleSubmit,action:"",className:"d-flex justify-content-center align-items-center flex-column",children:[s?(0,b.jsxs)("p",{className:"alert alert-danger rounded-0 w-100",children:[s,"."]}):"",j?(0,b.jsxs)("p",{className:"alert alert-success rounded-0 w-100",children:[j," ",(0,b.jsx)("span",{className:"d-block",children:"Please wait, we will redirect you."})]}):"",(0,b.jsx)("input",{type:"text",className:"form-control mb-3 rounded-0",placeholder:"Reset code",name:"resetCode",id:"resetCode",onChange:T.handleChange,value:T.values.resetCode,onBlur:T.handleBlur}),(0,b.jsx)(d.Z,{text:C?(0,b.jsx)(u.g4,{height:"30",width:"80",radius:"9",color:"#212529bf",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0}):"Submit",width:"w-100",type:"submit"})]})]})})})})}function g(){var e=(0,n.useContext)(m.D),t=e.forgotPasswordFun,s=e.reset,h=e.success,p=e.error,x=e.loading,w=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=c.Ry({email:c.Z_().required("Email is required").email("Email is not valid")}),g=(0,i.TA)({initialValues:{email:""},validationSchema:f,onSubmit:w});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(l.q,{children:[(0,b.jsx)("meta",{charSet:"utf-8"}),(0,b.jsx)("title",{children:"Forgot Password"})]}),(0,b.jsx)(o.Z,{text:"Forgot Password",path:"Forgot Password"}),(0,b.jsxs)("div",{className:"w-75 m-auto shadow text-center my-5 p-5",children:[(0,b.jsx)("h3",{children:"Forgot your password?"}),(0,b.jsx)("p",{className:"text-muted",children:"Please enter your email."}),(0,b.jsxs)("form",{onSubmit:g.handleSubmit,action:"",className:"d-flex justify-content-center align-items-center flex-column",children:[p?(0,b.jsxs)("p",{className:"alert alert-danger rounded-0 w-100",children:[p,"."]}):"",h?(0,b.jsx)("p",{className:"alert alert-success rounded-0 w-100",children:h}):"",(0,b.jsx)("input",{type:"email",className:"form-control mb-3 rounded-0",placeholder:"Email address",name:"email",id:"email",onChange:g.handleChange,value:g.values.email,onBlur:g.handleBlur}),g.errors.email&&g.touched.email?(0,b.jsx)("p",{className:"alert alert-danger mt-0 rounded-0 w-100",children:g.errors.email}):"",(0,b.jsx)(d.Z,{text:x?(0,b.jsx)(u.g4,{height:"30",width:"80",radius:"9",color:"#212529bf",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClassName:"",visible:!0}):"Submit",width:"w-100",type:"submit"})]}),s?(0,b.jsx)(j,{}):""]})]})}}}]);
//# sourceMappingURL=673.76871974.chunk.js.map